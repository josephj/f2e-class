<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>YUI - Node / Event</title>
<style type="text/css">
.highlighted {
    background: yellow;
}
</style>
</head>
<body>
    <h1>YUI - Node / Event</h1>
    <p>點一下會 highlight、DoubleClick 會做刪除</p>
    <div id="article">
        <h1>新店市好吃的餐廳</h1>
        <ul class="restaurant">
            <li>可愛村便當：台北縣新店市大豐街8號</li>
            <li>阿輝現炒黃牛肉：台北縣新店市中興路三段225號</li>
            <li>黑人牛肉麵：台北縣新店市中興路三段176號</li>
            <li>蘇杭：台北縣新店市民權路25號2F</li>
            <li>王家包子：台北縣新店市國校路25號之1</li>
            <li>辣。四川成都小炒：台北縣新店市吉安路2-1號</li>
            <li>山東餃子館：台北縣新店市中央路133巷19號1樓</li>
            <li>樂陶然健康小火鍋：台北縣新店市中央五街2號</li>
            <li>六六火鍋：台北縣新店市中央路89號</li>
            <li>龍門客棧：台北縣新店市中央路98號之1</li>
            <li>麵對麵：台北縣新店市中央路33號</li>
        </ul>
    </div>
    <script src="http://yui.yahooapis.com/3.7.2/build/yui/yui-min.js"></script>
    <script>
    // 步驟 1 - 指定使用 node 與 event 兩個 YUI 模組
    // YUI().use("模組 1", "模組 2", function (Y) {});
    YUI().use("node", "event", function (Y) {

        // 步驟 2 - 用 Y.delegate(事件, 函式, 母節點選取器, 過濾用Selector)
        // Y.delegate("click", function (e) {}, ".restaurant", "li");
        Y.delegate("click", function (e) {

            // 步驟 2.1 - 在事件處理函式中，可以用 this 取得目前點選的標籤參考
            var node = this;

            // 步驟 2.2 - 針對目前的標籤，使用 toggleClass("highlighted"); 即可切換 class="hightlighted"
            this.toggleClass("highlighted");

        }, ".restaurant", "li");

        // 步驟 3 - 點 2 下刪除節點，同步驟 2 將事件指定為 dblclick
        Y.delegate("dblclick", function (e) {

            // 步驟 3.1 - 可以利用 window.confirm 會依使用者回答回傳 true 或 false)
            if (window.confirm("您確定要刪除此節點嗎？")) {
                // 步驟 3.2 - 用 this 取得目前的參考
                var node = this;

                // 步驟 3.3 - 使用此物件的 remove 方法
                this.remove();

                // 步驟 3.4 - 使用 Y.fire 發送一個 delete 事件、第二個參數是刪除的標籤內容
                Y.fire("delete", this.getContent());
            }
        }, ".restaurant", "li");

        Y.on("delete", function (data) {
            Y.log("收到 delete 事件，內容為：" + data);
        });

    });
    </script>
</body>
</html>